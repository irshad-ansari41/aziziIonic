<!--
  Generated template for the MortgageCalculatorPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header>
    <ion-navbar>
        <button ion-button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>Mortgage Calculator</ion-title>
        <ion-buttons end>
            <button ion-button (click)="openHomePage()">
                    <ion-icon name="home"></ion-icon>
            </button>
            <button ion-button (click)="openMorePage()">
                    <ion-icon name="more"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>


<ion-content>

    <form [formGroup]="form" (ngSubmit)="logForm()">

        <ion-item>
            <ion-label>Loan Amount:</ion-label>
            <ion-input type="number" formControlName="amount" placeholder="Loan Amount"></ion-input>                
        </ion-item>
        <div padding-left class="validation-errors">
            <ng-container *ngFor="let validation of validation_messages.amount">
                <div class="error-message" *ngIf="form.get('amount').hasError(validation.type) && (form.get('amount').dirty || form.get('amount').touched)">
                 {{ validation.message }}
                </div>
            </ng-container>
        </div>
        
        <ion-item>
            <ion-label>Annual interest rate:</ion-label>
            <ion-input type="number" formControlName="interest" placeholder="Interest rate"></ion-input>                
        </ion-item>
        <div padding-left class="validation-errors">
            <ng-container *ngFor="let validation of validation_messages.interest">
                <div class="error-message" *ngIf="form.get('interest').hasError(validation.type) && (form.get('interest').dirty || form.get('interest').touched)">
                 {{ validation.message }}
                </div>
            </ng-container>
        </div>
        
         <ion-item>
                <ion-label>Loan period in years:</ion-label>
                <ion-select formControlName="years" interface="popover" placeholder="Select">
                    <ion-option value="{{year.key}}" *ngFor="let year of years">{{year.value}}</ion-option>
                </ion-select>
        </ion-item>
        <div padding-left class="validation-errors">
            <ng-container *ngFor="let validation of validation_messages.source">
                <div class="error-message" *ngIf="form.get('years').hasError(validation.type) && (form.get('years').dirty || form.get('years').touched)">
                  {{ validation.message }}
                </div>
            </ng-container>
        </div>
        
        <ion-item>
            <ion-label>Start date of loan:</ion-label>
            <ion-input type="date" formControlName="start_date" placeholder="Start date"></ion-input>                
        </ion-item>
        <div padding-left class="validation-errors">
            <ng-container *ngFor="let validation of validation_messages.start_date">
                <div class="error-message" *ngIf="form.get('start_date').hasError(validation.type) && (form.get('start_date').dirty || form.get('start_date').touched)">
                 {{ validation.message }}
                </div>
            </ng-container>
        </div>
        
        <div padding>
            <button ion-button block color="primary" type="submit" [disabled]="!form.valid">Calculate</button>
        </div>

</form>

</ion-content>
